{"version":3,"sources":["nav.js","pages/chat.js","images/s.svg","images/crown2.svg","images/shield2.svg","images/people4.svg","images/xWhite.svg","images/xGrey.svg","images/nextWhite2.svg","images/sendWhite.svg","images/heartWhite.svg","images/disketteWhite.svg","images/exclamationWhite.svg","images/heartBlueEmpty.svg","images/heartBlueFilled.svg","images/reportEmpty.svg","images/reportFilled.svg","images/circle_checkmark.svg","WithRouterContainer.js","pages/home.js","pages/signup.js","pages/login.js","pages/about.js","pages/contact.js","pages/history.js","pages/notfound.js","routing.js","App.js","serviceWorker.js","index.js"],"names":["logo","require","Nav","props","_this","Object","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","state","location","window","signupVisible","pathname","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","class","react_router_dom__WEBPACK_IMPORTED_MODULE_7__","to","src","alt","ChatButton","visible","React","Component","_this3","hover","onMouseEnter","bind","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_0__","onMouseLeave","setState","className","concat","statusIdentifying","statusSearching","statusMatched","messageTypeActivity","messageTypeChatting","messageTypeResult","messageTypeSystem","activityOwnTyping","resultLike","resultDislike","reportOptions","rdl","rsp","rse","rha","rra","rot","systemSearch","systemDisconnect","svgXWhite","svgXGrey","svgNext","svgSendWhite","svgHeartBlueEmpty","svgHeartBlueFilled","svgReportEmpty","svgReportFilled","Chat","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","onFocus","scrollToBottom","tabActive","unread","document","title","onBlur","handleEscKey","e","key","handleDisconnect","onMessage","receivedJson","JSON","parse","data","undefined","console","log","type","handleSystemMessage","handleChatMessage","handleActivityMessage","onResize","status","confirm","o","text","websocket","send","stringify","handleMessageClick","el","target","parentElement","querySelector","classList","contains","remove","add","handleReportModalClose","currentTarget","reportModalOpen","handleReportOptionClick","getAttribute","found","keys","map","sendWebsocketMessage","reported","handleSearch","clearChat","statusShow","liked","handleLike","handleSave","handleReport","that","_Users_nazar_n_src_hobee_fe_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","messages","statusText","typingTimeout","setTimeout","connectToChat","connectToWs","onOpen","onClose","prevProps","removeEventListener","identify","ws","process","PORT","loc","wsUrl","protocol","host","WebSocket","Error","_context2","t0","binaryType","onopen","onclose","onmessage","addEventListener","fetch","credentials","response","json","_context4","_context5","msg","authoruuid","slice","push","pushUnreadMessage","pullRoomMessages","chatStatusFromMessages","pullResult","result","clearTimeout","scrollTop","scrollHeight","url","search","_context8","error","t","err","react__WEBPACK_IMPORTED_MODULE_8___default","_nav__WEBPACK_IMPORTED_MODULE_9__","ChatMessages","searching","ChatControls","disconnected","matched","_this2","msgsHTML","Timestamp","direction","timestamp","onClick","ChatStatus","show","sendInputMessage","input","getElementsByTagName","value","inputText","handleKeyDown","handleOnChange","typing","handleSendClick","DisconnectSearchButton","MiddleControl","onKeyDown","onChange","disabled","placeholder","maxLength","ReportModal","open","dateTimestamp","Date","hours","getHours","minutes","getMinutes","ampm","strTime","_this4","alreadyReported","reportOptionsHTML","data-key","module","exports","__webpack_require__","p","WithRouter","unlisten","history","listen","action","onRouteChange","children","withRouter","Home","classCallCheck","possibleConstructorReturn","getPrototypeOf","didMount","height","width","react_default","nav","Link","svgCircleCheckmark","Contact","sent","handleFormSubmit","assertThisInitialized","preventDefault","name","getElementById","email","message","params","method","headers","Content-Type","body","_context","id","rows","readOnly","ChatHistory","chats","length","chat","duration","NotFound","style","position","top","zIndex","Routing","Switch","Route","path","exact","render","home_Home","pages_chat","contact_Contact","component","App","innerHeight","innerWidth","vh","documentElement","setProperty","newLocation","BrowserRouter","WithRouterContainer","handleRouteChange","react_transition_group","classNames","in","appear","timeout","enter","exit","routing_Routing","Boolean","hostname","match","ReactDOM","App_App","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.59fd1788.chunk.js","sourcesContent":["import React from \"react\";\n// import MediaQuery from 'react-responsive';\nimport { Link } from \"react-router-dom\";\n\n// const colorBlack = '#000000';\n// const colorWhite = '#FFFFFF';\n// const colorMediumBlue = '#0000CD';\n// const colorBlueSoft = '#0074d9';\n// const colorBlueDarker = '#005299';\n\nconst logo = require('./images/s.svg');\n\nexport default class Nav extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: window.location,\n    };\n  }\n\n  // componentWillReceiveProps(nextProps) {\n  //   this.setState({ location: nextProps.location });\n  // }\n\n  render() {\n    let signupVisible = true;\n    let pathname = this.state.location.pathname;\n\n    // Don't show signup button in signup page\n    // Hack: temporarily don't show it on /chat as well\n    if (pathname === \"/chat\") {\n      signupVisible = false;\n    }\n\n    return (\n      <div class=\"nav-height\">\n        <div class=\"nav nav-height\">\n          <Link class=\"logo-link logo-height\" to=\"/\" >\n            <img class=\"logo logo-height\" src={logo} alt=\"Logo\" />\n          </Link>\n          <ChatButton visible={signupVisible} />\n        </div>\n      </div>\n    );\n  }\n}\n\nclass SignupButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover: false,\n    };\n\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n  }\n\n  onMouseEnter() {\n    this.setState({ hover: true });\n  }\n\n  onMouseLeave() {\n    this.setState({ hover: false });\n  }\n\n  render() {\n    return (\n        <div style={{ position: 'absolute', top: '18px', right: this.props.margin }}>\n          <Link to=\"/signup\">\n            <button className={`sign-up-button ${this.props.visible ? '' : 'fade'}`} style={{ width: this.props.width }}>\n              Sign up\n            </button>\n          </Link>\n        </div>\n    );\n  }\n}\n\nclass ChatButton extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hover: false,\n    };\n\n    this.onMouseEnter = this.onMouseEnter.bind(this);\n    this.onMouseLeave = this.onMouseLeave.bind(this);\n  }\n\n  onMouseEnter() {\n    this.setState({ hover: true });\n  }\n\n  onMouseLeave() {\n    this.setState({ hover: false });\n  }\n\n  render() {\n    return (\n        <div className=\"chat-button-link-wrapper\">\n          <Link to=\"/chat\">\n            <button className={`chat-button-link scale${this.props.visible ? '' : ' fade'}`}>\n              Chat\n            </button>\n          </Link>\n        </div>\n    );\n  }\n}","import React from \"react\";\n\nimport Nav from \"../nav\";\n\nconst statusIdentifying = \"identifying\";\nconst statusConnecting = \"connecting\";\nconst statusSearching = \"searching\";\nconst statusMatched = \"matched\";\nconst statusDisconnected = \"disconnected\";\n\nconst messageTypeActivity = \"a\";\nconst messageTypeChatting = \"c\";\nconst messageTypeResult = \"r\";\nconst messageTypeSystem = \"s\";\n\nconst activityUserActive = \"ua\";\nconst activityUserInactive = \"ui\";\nconst activityRoomActive = \"ra\";\nconst activityRoomInactive = \"ri\";\nconst activityOwnTyping = \"t\";\n\nconst messageTypeOwn = \"o\";\nconst messageTypeBuddy = \"b\";\n\nconst resultLike = \"rl\";\nconst resultDislike = \"rd\";\n\n// Has to be 6 items to fit the height perfectly\nconst reportOptions = {\n  'rdl': `I didn't like the conversation`,\n  'rsp': 'Spam',\n  'rse': 'Sexism',\n  'rha': 'Harassment',\n  'rra': 'Racism',\n  'rot': 'Other',\n};\n\nconst systemSearch = \"s\";\nconst systemConnect = \"c\";\nconst systemDisconnect = \"d\";\n\nconst svgXWhite = require('../images/xWhite.svg');\nconst svgXGrey = require('../images/xGrey.svg');\nconst svgNext = require('../images/nextWhite2.svg');\nconst svgSendWhite = require('../images/sendWhite.svg');\n\nconst svgHeartWhite = require('../images/heartWhite.svg');\nconst svgDisketteWhite = require('../images/disketteWhite.svg');\nconst svgExclamationWhite = require('../images/exclamationWhite.svg');\n\nconst svgHeartBlueEmpty = require('../images/heartBlueEmpty.svg');\nconst svgHeartBlueFilled = require('../images/heartBlueFilled.svg');\n\n// const svgDisketteYellow = require('../images/disketteYellow.svg');\n\nconst svgReportEmpty = require('../images/reportEmpty.svg');\nconst svgReportFilled = require('../images/reportFilled.svg');\n\nexport default class Chat extends React.Component {\n  constructor(props) {\n    super(props);\n\n    let that = this;\n\n    this.state = {\n      messages: [],\n      status: statusIdentifying,\n      websocket: null,\n      liked: false,\n      reportModalOpen: false,\n      reported: '',\n      tabActive: true,\n      unread: 0,\n      statusShow: false,\n      statusText: '',\n      typingTimeout: setTimeout(function () {\n        if (that.state.statusText !== 'Buddy is typing...') {\n          return false;\n        }\n\n        that.setState({statusShow: false});\n      }, 2000),\n    };\n\n    this.connectToChat = this.connectToChat.bind(this);\n    this.connectToWs = this.connectToWs.bind(this);\n    this.onOpen = this.onOpen.bind(this);\n    this.onClose = this.onClose.bind(this);\n    this.sendWebsocketMessage = this.sendWebsocketMessage.bind(this);\n    this.handleSystemMessage = this.handleSystemMessage.bind(this);\n    this.handleChatMessage = this.handleChatMessage.bind(this);\n    this.clearChat = this.clearChat.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.messages !== this.props.messages) {\n      this.setState({messages: this.props.messages});\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleEscKey, false);\n    window.removeEventListener(\"focus\", this.onFocus);\n    window.removeEventListener(\"blur\", this.onBlur);\n    window.removeEventListener('resize', this.onResize);\n  }\n\n  clearChat() {\n    this.setState({messages: []});\n  }\n\n  onFocus = () => {\n    this.scrollToBottom();\n    this.setState({tabActive: true, unread: 0});\n\n    document.title = 'hobee: Quality conversations';\n  }\n\n  onBlur = () => {\n    this.setState({tabActive: false});\n  }\n\n  async connectToChat() {\n    // Obtain cookie if not set\n    let response = await this.identify();\n    if (!response) {\n      return false;\n    }\n    this.setState({status: statusConnecting});\n\n    let success = this.connectToWs();\n    if (!success) {\n      // Try to reconnect again soon\n      return;\n    }\n\n    // If all goes successfully - do not prompt to reconnect\n    return true;\n  }\n\n  async connectToWs() {\n    // Connect to WS\n    let ws = null;\n\n    let port = 8080;\n    if (!!process && !!process.env && !!process.env.PORT) {\n      port = process.env.PORT;\n    }\n\n    try {\n      var loc = window.location, wsUrl;\n      if (loc.protocol === \"https:\") {\n        wsUrl = \"wss:\";\n      } else {\n        wsUrl = \"ws:\";\n      }\n      wsUrl += \"//\" + loc.host;\n      wsUrl += \"/api/chat\";\n\n      ws = await new WebSocket(wsUrl);\n      if (ws === undefined) {\n        throw new Error(\"Could not connect to ws\");\n      }\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    ws.binaryType = \"arraybuffer\";\n\n    ws.onopen = this.onOpen;\n    ws.onclose = this.onClose;\n    ws.onmessage = this.onMessage();\n\n    this.setState({websocket: ws});\n\n    return true;\n  }\n\n  async componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleEscKey, false);\n    window.addEventListener(\"focus\", this.onFocus);\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener('resize', this.onResize);\n\n    this.connectToChat();\n  }\n\n  async pullRoomMessages() {\n    let url = \"/api/messages\";\n    let json;\n\n    try {\n      let response = await fetch(url, {credentials: \"include\"});\n      json = await response.json();\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    if (json.messages === undefined) {\n      console.log(\"Unknown response:\", json);\n      return false;\n    }\n\n    return json.messages;\n  }\n\n  async pullResult() {\n    let url = \"/api/result\";\n    let json;\n\n    try {\n      let response = await fetch(url, {credentials: \"include\"});\n      json = await response.json();\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    if (json.liked === undefined) {\n      throw new Error(\"Unknown pull result response\", json);\n      return false;\n    }\n\n    return json;\n  }\n\n  chatStatusFromMessages(messages) {\n    let statusShow = this.state.statusShow;\n    let statusText = this.state.statusText;\n\n    messages.map((msg) => {\n      if (msg.type === messageTypeActivity && msg.authoruuid === messageTypeBuddy && msg.text === activityUserInactive) {\n        statusShow = true;\n        statusText = 'Buddy is inactive';\n      }\n\n      if (msg.type === messageTypeActivity && msg.authoruuid === messageTypeBuddy && msg.text === activityUserActive) {\n        statusShow = false;\n      }\n\n      if (msg.type === messageTypeSystem && msg.text === systemDisconnect) {\n        statusShow = true;\n        statusText = 'You disconnected';\n\n        if (msg.authoruuid === messageTypeBuddy) {\n          statusText = 'Buddy disconnected';\n        }\n      }\n    });\n\n    this.setState({statusShow: statusShow, statusText: statusText});\n  }\n\n  async handleSystemMessage(msg) {\n    let status, messages = this.state.messages.slice();\n\n    switch (msg.text) {\n      case systemConnect:\n        console.log(\"Matched\");\n        status = statusMatched;\n        break;\n      case systemDisconnect:\n        console.log(\"Disconnected\");\n        let statusText = 'You disconnected';\n        if (msg.authoruuid === messageTypeBuddy) {\n          statusText = 'Buddy disconnected';\n        }\n\n        this.setState({statusShow: true, statusText: statusText});\n\n        status = statusDisconnected;\n        break;\n      case systemSearch:\n        console.log(\"Available for search\");\n        status = statusSearching;\n        break;\n      default:\n        throw new Error(\"Unknown system message\", msg.text);\n    }\n\n    if (status != statusSearching) {\n      messages.push(msg);\n    }\n\n    if (status === statusSearching) {\n      this.clearChat();\n      this.sendWebsocketMessage(messageTypeSystem, systemSearch);\n    }\n\n    this.setState({status: status, messages: messages});\n  }\n\n  handleChatMessage(msg) {\n    var messages = this.state.messages.slice();\n    messages.push(msg);\n    this.setState({messages: messages});\n\n    this.scrollToBottom();\n    this.pushUnreadMessage();\n  }\n\n  async handleActivityMessage(msg) {\n    let status = this.state.status, messages = this.state.messages.slice();\n\n    switch (msg.text) {\n      case activityRoomActive:\n        status = statusMatched;\n\n        messages = await this.pullRoomMessages();\n        this.chatStatusFromMessages(messages);\n        break;\n      case activityRoomInactive:\n        status = statusDisconnected;\n        messages = await this.pullRoomMessages();\n        this.chatStatusFromMessages(messages);\n\n        let result = await this.pullResult();\n        this.setState({liked: result.liked, reported: result.reported});\n        break;\n      case activityUserActive:\n        // If buddy goes active - remove the status\n        if (msg.authoruuid === messageTypeBuddy) {\n          this.setState({statusShow: false});\n        }\n        break;\n      case activityUserInactive:\n        // If buddy goes inactive - add the status\n        if (msg.authoruuid === messageTypeBuddy) {\n          this.setState({statusShow: true, statusText: 'Buddy is inactive'});\n        }\n        break;\n      case activityOwnTyping:\n        this.setState({statusShow: true, statusText: 'Buddy is typing...'});\n\n        clearTimeout(this.state.typingTimeout);\n\n        let that = this;\n\n        this.setState({\n          typingTimeout: setTimeout(function () {\n                // User might go inactive right after typing, this will cause a bug where the status will be removed\n                if (that.state.statusText !== 'Buddy is typing...') {\n                  return false;\n                }\n\n                that.setState({statusShow: false});\n              }, 2000\n          ),\n        });\n\n        // Return now, we don't need to update status/messages, or scroll to the bottom\n        return;\n      default:\n        throw new Error(\"Unknown activity received\", msg);\n    }\n\n    messages.push(msg);\n\n    this.setState({status: status, messages: messages});\n\n    this.scrollToBottom();\n  }\n\n  handleEscKey = (e) => {\n    if (e.key === \"Escape\") {\n      this.handleDisconnect();\n      return true;\n    }\n  }\n\n  pushUnreadMessage() {\n    // We only push unread messages when the tab is not active\n    if (this.state.tabActive) {\n      return false;\n    }\n\n    this.setState({unread: this.state.unread + 1});\n\n    document.title = '(' + this.state.unread + ')' + ' hobee: Quality conversations';\n  }\n\n  scrollToBottom() {\n    document.querySelector(\".chat-messages\").scrollTop = document.querySelector(\".chat-messages\").scrollHeight;\n  }\n\n  async identify() {\n    let url = \"/api/identify\" + window.location.search;\n    let json;\n\n    try {\n      let response = await fetch(url, {credentials: \"include\"});\n      json = await response.json();\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    if (json.error === undefined || json.error) {\n      console.log(\"Unknown response:\", json);\n      return false;\n    }\n\n    return true;\n  }\n\n  onClose() {\n    this.setState({status: statusDisconnected});\n  }\n\n  onMessage = () => {\n    return (e) => {\n      var receivedJson = JSON.parse(e.data);\n\n      if (receivedJson === null || receivedJson === undefined) {\n        console.log(\"Received unexpected JSON:\", receivedJson);\n      }\n\n      switch (receivedJson.type) {\n        case messageTypeSystem:\n          this.handleSystemMessage(receivedJson);\n          break;\n\n        case messageTypeChatting:\n          this.handleChatMessage(receivedJson);\n          break;\n        case messageTypeActivity:\n          this.handleActivityMessage(receivedJson);\n          break;\n        default:\n          console.log(\"Unexpected json:\", receivedJson);\n      }\n    }\n  }\n\n  onOpen() {\n  }\n\n  onResize = () => {\n    this.scrollToBottom()\n  }\n\n  sendWebsocketMessage(t, msg) {\n    // check type\n    var o = {\n      type: t,\n      text: msg\n    };\n\n    if (this.state.websocket === null || this.state.websocket === undefined) {\n      console.log(\"Not connected to WS\");\n      return false;\n    }\n\n    try {\n      this.state.websocket.send(JSON.stringify(o));\n    } catch (err) {\n      console.log(err);\n      return false\n    }\n\n    return true;\n  }\n\n  handleDisconnect = () => {\n    if (this.state.status !== statusMatched) {\n      return false;\n    }\n\n    if (!window.confirm(\"Are you sure you want to disconnect?\")) {\n      return false;\n    }\n\n    var o = {\n      type: messageTypeSystem,\n      text: systemDisconnect,\n    };\n\n    this.state.websocket.send(JSON.stringify(o));\n  }\n\n  handleMessageClick = (e) => {\n    let el = e.target;\n    if (el.parentElement.querySelector('.message-timestamp').classList.contains('visible')) {\n      el.parentElement.querySelector('.message-timestamp').classList.remove('visible');\n      return true;\n    }\n\n    el.parentElement.querySelector('.message-timestamp').classList.add('visible');\n    return true;\n  }\n\n  handleReportModalClose = (e) => {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n\n    this.setState({reportModalOpen: false});\n  }\n\n  handleReportOptionClick = (e) => {\n    const text = e.target.getAttribute('data-key');\n\n    let found = false;\n\n    Object.keys(reportOptions).map(function (key) {\n      if (key === text) {\n        found = true\n      }\n    });\n\n    // Someone messing with the data-keys ;)\n    if (!found) {\n      return false;\n    }\n\n    this.sendWebsocketMessage(messageTypeResult, text);\n\n    this.setState({reportModalOpen: false, reported: text});\n  }\n\n  handleSearch = () => {\n    this.clearChat();\n\n    var o = {\n      type: messageTypeSystem,\n      text: systemSearch,\n    };\n\n    this.state.websocket.send(JSON.stringify(o));\n\n    this.setState({status: statusSearching, statusShow: false, reported: '', liked: false});\n  }\n\n  handleLike = () => {\n    if (this.state.liked) {\n      this.sendWebsocketMessage(messageTypeResult, resultDislike);\n    }\n\n    if (!this.state.liked) {\n      this.sendWebsocketMessage(messageTypeResult, resultLike);\n    }\n\n    this.setState({liked: !this.state.liked});\n  }\n\n  handleSave = () => {\n    console.log(\"Save clicked\");\n  }\n\n  handleReport = () => {\n    this.setState({reportModalOpen: true});\n  }\n\n  // Temporarily disabled, to allow mobile to see timestamp too, so now it's on click instead\n  // handleMouseEnter = (e) => {\n  //   let el = e.target;\n  //   el.parentElement.querySelector('.message-timestamp').classList.add('visible');\n  // }\n  //\n  // handleMouseLeave = (e) => {\n  //   let el = e.target;\n  //   el.parentElement.querySelector('.message-timestamp').classList.remove('visible');\n  // }\n\n  render() {\n    return (\n        <div>\n          <Nav location={this.props.location} />\n          <div className={`main-content`}>\n            <ChatMessages messages={this.state.messages}\n                          searching={this.state.status === statusConnecting || this.state.status === statusSearching}\n                          status={this.state.status} handleMessageClick={this.handleMessageClick}/>\n            <ChatControls websocket={this.state.websocket} handleDisconnect={this.handleDisconnect}\n                          handleSearch={this.handleSearch} disconnected={this.state.status === statusDisconnected}\n                          matched={this.state.status === statusMatched} handleLike={this.handleLike}\n                          liked={this.state.liked} reported={this.state.reported}\n                          handleSave={this.handleSave} handleReport={this.handleReport}\n                          searching={this.state.status === statusConnecting || this.state.status === statusSearching}\n                          statusShow={this.state.statusShow} statusText={this.state.statusText}\n                          sendWebsocketMessage={this.sendWebsocketMessage} reportModalOpen={this.state.reportModalOpen}\n                          handleReportModalClose={this.handleReportModalClose}\n                          handleReportOptionClick={this.handleReportOptionClick}\n            />\n          </div>\n        </div>\n    );\n  }\n}\n\nclass ChatMessages extends React.Component {\n  render() {\n    if (this.props.searching) {\n      return (\n          <div className=\"chat-messages\">\n            <div className=\"status-wrapper\">\n              <div className=\"loader\"></div>\n              <div className=\"status\">{this.props.status}</div>\n            </div>\n          </div>\n      )\n    }\n\n    let msgs = this.props.messages;\n\n    let msgsHTML = msgs.map((msg) => {\n          // We skip the room active/inactive messages, which are only for us to know if we need to pull messages and\n          // show disconnected state\n          if (msg.type === messageTypeSystem || msg.type === messageTypeActivity) {\n            return;\n          }\n\n          if (msg.type !== messageTypeChatting) {\n            throw new Error('Unknown message type in chat messages', msg.type);\n            return;\n          }\n\n          if (msg.authoruuid === messageTypeOwn) {\n            return (\n                <div className={`my-message-container`}>\n                  <Timestamp direction={'left'} timestamp={msg.timestamp}/>\n                  <div className={`chat-message my-message`} onClick={this.props.handleMessageClick}>\n                    {msg.text}\n                  </div>\n                  {/*<div className={`my-message-corner`}>*/}\n                  {/*<div className={`my-message-corner-blue`}></div>*/}\n                  {/*<div className={`my-message-corner-white`}></div>*/}\n                  {/*</div>*/}\n                </div>\n            );\n          }\n\n          if (msg.authoruuid === messageTypeBuddy) {\n            return (\n                <div className={`buddy-message-container`}>\n                  {/*<div className={`buddy-message-corner`}>*/}\n                  {/*<div className={`buddy-message-corner-grey`}></div>*/}\n                  {/*<div className={`buddy-message-corner-white`}></div>*/}\n                  {/*</div>*/}\n                  <div className={`chat-message buddy-message`} onClick={this.props.handleMessageClick}>\n                    {msg.text}\n                  </div>\n                  <Timestamp direction={'right'} timestamp={msg.timestamp}/>\n                </div>\n            );\n          }\n\n          throw new Error(\"Unknown where to show the message\", msg);\n        }\n    );\n\n    return (\n        <div className='chat-messages fade-in'>\n          {msgsHTML}\n        </div>\n    );\n  }\n}\n\nclass ChatStatus extends React.Component {\n  render() {\n    return (\n        <div className={`chat-status-container` + (this.props.show ? ' visible' : '')}>\n          <div className=\"chat-status\">{this.props.text}</div>\n        </div>\n    );\n  }\n}\n\nclass ChatControls extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      inputText: '',\n      typing: false,\n    };\n  }\n\n  sendInputMessage = () => {\n    let input = document.getElementsByTagName('input')[0];\n    let text = input.value;\n\n    // If input is empty - nothing to send\n    if (text === '') {\n      return true;\n    }\n\n    var o = {\n      type: \"o\",\n      text: text,\n    };\n\n    this.props.websocket.send(JSON.stringify(o));\n\n    console.log(\"Sent message:\", text);\n    input.value = '';\n    this.setState({inputText: input.value});\n\n    return true;\n  }\n\n  handleKeyDown = (e) => {\n    if (e.key === \"Enter\") {\n      this.sendInputMessage();\n      return true;\n    }\n  }\n\n  handleOnChange = (e) => {\n    let input = document.getElementsByTagName('input')[0];\n\n    // Ignore on change if we can't find the element\n    if (!input) {\n      return false;\n    }\n\n    this.setState({inputText: input.value});\n\n    if (!this.state.typing) {\n      this.setState({typing: true});\n\n      var that = this;\n\n      this.props.sendWebsocketMessage(messageTypeActivity, activityOwnTyping);\n\n      // Reset the typing in the state after 1 second\n      setTimeout(function () {\n        that.setState({typing: false});\n      }, 1000);\n    }\n  }\n\n  handleSendClick = () => {\n    this.sendInputMessage();\n  }\n\n  render() {\n    return (\n        <div className={`chat-controls connected fade-in`}>\n          <ChatStatus show={this.props.statusShow} text={this.props.statusText}/>\n          <DisconnectSearchButton handleDisconnect={this.props.handleDisconnect} handleSearch={this.props.handleSearch}\n                                  disconnected={this.props.disconnected} matched={this.props.matched}/>\n          <MiddleControl matched={this.props.matched} onKeyDown={this.handleKeyDown} onChange={this.handleOnChange}\n                         handleLike={this.props.handleLike} liked={this.props.liked} reported={this.props.reported}\n                         handleSave={this.props.handleSave} handleReport={this.props.handleReport}\n                         searching={this.props.searching} reportModalOpen={this.props.reportModalOpen}\n                         handleReportModalClose={this.props.handleReportModalClose}\n                         handleReportOptionClick={this.props.handleReportOptionClick}/>\n          <div className=\"circle-wrapper send\">\n            <button\n                className={`chat-send-button circle` +\n                ((this.props.disconnected || this.state.inputText === '') ? ' disabled' : '')}\n                onClick={this.handleSendClick}\n                disabled={(this.props.disconnected || this.state.inputText === '' ? ' disabled' : '')}>\n              <img className=\"button-icon\" src={svgSendWhite} alt=\"Send\"></img>\n            </button>\n          </div>\n        </div>\n    );\n  }\n}\n\nclass DisconnectSearchButton extends React.Component {\n  render() {\n    if (this.props.disconnected) {\n      return (\n          <div className=\"circle-wrapper\">\n            <button className={`chat-next-button circle`} onClick={this.props.handleSearch}>\n              <img className=\"button-icon\" src={svgNext} alt=\"Next\"></img>\n            </button>\n          </div>\n      );\n    }\n\n    return (\n        <div className=\"circle-wrapper\">\n          <button className={`chat-disconnect-button circle` +\n          ((this.props.matched) ? '' : ' disabled')} onClick={this.props.handleDisconnect}>\n            <img className=\"button-icon x\" src={svgXWhite} alt=\"Disconnect\"></img>\n          </button>\n        </div>\n    );\n  }\n}\n\nclass MiddleControl extends React.Component {\n  render() {\n    if (this.props.searching) {\n      return (\n          <div className={`middle-buttons`}></div>\n      );\n    }\n\n    if (this.props.matched) {\n      return (\n          <input type=\"text\" placeholder=\"Message\"\n                 className={`chat-input` + (this.props.disconnected ? ' chat-controls-disabled' : '')}\n                 onKeyDown={this.props.onKeyDown} onChange={this.props.onChange} maxLength={1024 - 40}\n                 disabled={(this.props.disconnected ? ' disabled' : '')}/>\n      );\n    }\n    return (\n        <div className={`middle-buttons`}>\n          <div className=\"circle-wrapper\">\n            <button className={`middle-button circle like-button` + (this.props.liked ? '' : ' active')}\n                    onClick={this.props.handleLike}>\n              <img className=\"button-icon like\" src={(this.props.liked ? svgHeartBlueFilled : svgHeartBlueEmpty)}\n                   alt=\"Like\"></img>\n              {/*<div className={(this.props.liked ? ' like-text animate' : 'like-text')}>Liked</div>*/}\n            </button>\n          </div>\n          {/*<div className=\"circle-wrapper\">*/}\n          {/*<button className={`middle-button circle save-button`} onClick={this.props.handleSave}>*/}\n          {/*<img className=\"button-icon\" src={svgDisketteWhite} alt=\"Save\"></img>*/}\n          {/*</button>*/}\n          {/*</div>*/}\n          <div className=\"circle-wrapper\">\n            <ReportModal open={this.props.reportModalOpen} onClose={this.props.handleReportModalClose}\n                         handleReportOptionClick={this.props.handleReportOptionClick} reported={this.props.reported}/>\n            <button className={`middle-button circle report-button` + (this.props.reported ? ' active' : '')}\n                    onClick={this.props.handleReport}>\n              <img className=\"button-icon\" src={(this.props.reported ? svgReportFilled : svgReportEmpty)}\n                   alt=\"Report\"></img>\n            </button>\n          </div>\n        </div>\n    );\n  }\n}\n\nclass Timestamp extends React.Component {\n  render() {\n    // let hoursOffset = -(new Date().getTimezoneOffset() / 60);\n    let dateTimestamp = new Date(this.props.timestamp);\n\n    // dateTimestamp.setHours(dateTimestamp.getHours()+ hoursOffset);\n\n    let hours = dateTimestamp.getHours();\n    let minutes = dateTimestamp.getMinutes();\n    let ampm = hours >= 12 ? 'PM' : 'AM';\n\n    hours = hours % 12;\n    hours = hours ? hours : 12; // the hour '0' should be '12'\n    minutes = minutes < 10 ? '0' + minutes : minutes;\n\n    let strTime = hours + ':' + minutes + ' ' + ampm;\n\n    return (\n        <span\n            className={`message-timestamp` + (this.props.direction === 'bottom' ? ' timestamp-system' : '')}>{strTime}</span>\n    );\n  }\n}\n\nclass ReportModal extends React.Component {\n  render() {\n    if (!this.props.open) {\n      return null;\n    }\n\n    const alreadyReported = (this.props.reported !== '');\n\n    const reportOptionsHTML = Object.keys(reportOptions).map((key) => {\n      if (alreadyReported) {\n        return (\n            <div className={`report-option` + (this.props.reported === key ? ` selected` : ` disabled`)} data-key={key} key={key}>\n              {reportOptions[key]}\n            </div>\n        );\n      }\n\n      return (\n          <div className=\"report-option enabled\" data-key={key} key={key} onClick={this.props.handleReportOptionClick}>\n            {reportOptions[key]}\n          </div>\n      );\n    });\n\n    return (\n        <div className=\"backdrop\" onClick={this.props.onClose}>\n          <div className=\"report-modal\">\n            <div className=\"report-header\">\n              <div className=\"report-header-side\"></div>\n              <div className=\"report-header-title\">Report</div>\n              <div className=\"report-header-side\">\n                <img className=\"report-x\" src={svgXGrey} alt=\"Close\" onClick={this.props.onClose}></img>\n              </div>\n            </div>\n            <div className=\"report-options\">\n              {reportOptionsHTML}\n            </div>\n          </div>\n        </div>\n    );\n  }\n}\n","module.exports = __webpack_public_path__ + \"static/media/s.b117b408.svg\";","module.exports = __webpack_public_path__ + \"static/media/crown2.b2b97c41.svg\";","module.exports = __webpack_public_path__ + \"static/media/shield2.c405312f.svg\";","module.exports = __webpack_public_path__ + \"static/media/people4.ce737683.svg\";","module.exports = __webpack_public_path__ + \"static/media/xWhite.d527b858.svg\";","module.exports = __webpack_public_path__ + \"static/media/xGrey.2539a979.svg\";","module.exports = __webpack_public_path__ + \"static/media/nextWhite2.ce906727.svg\";","module.exports = __webpack_public_path__ + \"static/media/sendWhite.b7ed5a83.svg\";","module.exports = __webpack_public_path__ + \"static/media/heartWhite.cbaf32fe.svg\";","module.exports = __webpack_public_path__ + \"static/media/disketteWhite.27fe68ad.svg\";","module.exports = __webpack_public_path__ + \"static/media/exclamationWhite.f1eeb750.svg\";","module.exports = __webpack_public_path__ + \"static/media/heartBlueEmpty.a91080c9.svg\";","module.exports = __webpack_public_path__ + \"static/media/heartBlueFilled.29ea6b8a.svg\";","module.exports = __webpack_public_path__ + \"static/media/reportEmpty.cc62d953.svg\";","module.exports = __webpack_public_path__ + \"static/media/reportFilled.a3d45f32.svg\";","module.exports = __webpack_public_path__ + \"static/media/circle_checkmark.001302f6.svg\";","import React from \"react\";\nimport { withRouter } from 'react-router';\n\nclass WithRouter extends React.Component {\n  componentWillMount() {\n    this.unlisten = this.props.history.listen((location, action) => {\n      this.props.onRouteChange(location);\n    });\n  }\n\n  componentWillUnmount() {\n      this.unlisten();\n  }\n\n  componentDidMount() {\n    this.props.onRouteChange(this.props.location);\n  }\n\n  render() {\n     return (\n         this.props.children\n     );\n  }\n}\n\nexport default withRouter(WithRouter);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MediaQuery from 'react-responsive';\nimport Nav from \"../nav\";\n\nconst styles = {\n  section1: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    padding: '0 50px',\n    borderBottom: '1px solid #e6e6e6',\n    minHeight: '300px',\n    height: '100%',\n  },\n  section1Small: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n  },\n  section2: {\n    alignItems: 'center',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    padding: '0 50px',\n    minHeight: '300px',\n    height: '100%',\n    backgroundColor: '#fcfcff',\n  },\n  footer: {\n    // boxShadow: 'rgba(0, 0, 0, 0.1) 0px -4px 2px -2px',\n    border: '1px solid #ccc',\n    fontSize: '16px',\n    lineHeight: '70px',\n    height: '70px',\n    textAlign: 'center',\n    padding: '0 50px',\n    boxSizing: 'border-box',\n  },\n  motto: {\n    color: '#fff',\n    display: 'inline-block',\n    fontSize: '54px',\n    margin: '0',\n    textAlign: 'center',\n    // whiteSpace: 'pre-line',\n    width: '100%',\n  }\n}\n\n// const blueCircle = require('../images/bluecircle.png');\n// const checkmark = require('../images/checkmark.svg');\n// const shield = require('../images/shield.svg');\n// const people = require('../images/people.svg');\n// const people2 = require('../images/people2.svg');\n// const crown = require('../images/crown.svg');\n\nconst crown2 = require('../images/crown2.svg');\nconst shield2 = require('../images/shield2.svg');\nconst people4 = require('../images/people4.svg');\n\nexport default class Home extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      didMount: false,\n    };\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n        this.setState({didMount: true})\n    }, 0)\n  }\n\n// If height is less than 750 only then do we not fit everything on the screen? Or should we scale it down?\n  render() {\n    const sectionHeightHalf = (this.props.height - 140) / 2;\n    const sectionWidthThird = (this.props.width - 100) / 3;\n\n    const { didMount } = this.state;\n\n    return (\n      <div class=\"home scale\">\n        <Nav location={this.props.location} />\n        <div className=\"home-main\">\n          <div className=\"motto scale\">\n            <div className=\"motto-main scale\">Quality conversations</div>\n            <div className=\"motto-extra scale\">Anonymous dialogue chat, with the focus on the quality of the conversation</div>\n          </div>\n          <div className=\"jobs scale\">\n            <div className=\"jobs-items scale\">\n              <div className=\"jobs-circles\">\n                {/*<img src={crown2} height=\"100px\" widht=\"100px\" style={{ display: 'block', margin: '25px auto' }} alt={'Crown'} />*/}\n              </div>\n              <p className=\"jobs-titles\">Discover</p>\n              <p className=\"jobs-texts\">New people and share your stories</p>\n            </div>\n            <div className=\"jobs-items scale\">\n              <div className=\"jobs-circles\">\n                {/*<img src={shield2} height=\"80px\" widht=\"80px\" style={{ display: 'block', margin: '35px auto 25px auto' }} alt={'Shield'} />*/}\n              </div>\n              <p className=\"jobs-titles\">Engage</p>\n              <p className=\"jobs-texts\">In an interesting discussion or a simple conversation</p>\n            </div>\n            <div className=\"jobs-items scale\">\n              <div className=\"jobs-circles\">\n                {/*<img src={people4} height=\"100px\" widht=\"100px\" style={{ display: 'block', margin: '25px auto 5px auto' }} alt={'People'} />*/}\n              </div>\n              <p className=\"jobs-titles\">Find</p>\n              <p className=\"jobs-texts\">Wonderful experiences and relationships</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"footer\">\n          <span className=\"footer-item\"><Link to=\"/contact\">Contact</Link></span>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class Signup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      err: 'Error occured!',\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  }\n\n  handleFormSubmit(e) {\n    e.preventDefault();\n\n    this.setState({ hasError: !this.state.hasError });\n  }\n\n  render() {\n    const { hasError, err } = this.state;\n\n    return (\n      <div className=\"main-content background-shade-darker\">\n        <div className=\"auth-page\">\n          {/*<h1 className={`heading`}>Sign up</h1>*/}\n          <form style={{ textAlign: 'center' }}>\n            <p><input type=\"text\" placeholder=\"email\" id=\"email\" className={`auth-input`} /></p>\n            <p><input type=\"password\" placeholder=\"password\" className={`auth-input`} /></p>\n            <p><input type=\"text\" placeholder=\"invitation code\" className={`auth-input`} /></p>\n            <p><input type=\"text\" className={`error-auth ${hasError ? 'visible' : ''}`} value={ err } readOnly /></p>\n            <button className={`submit-button`} onClick={this.handleFormSubmit}>Sign up</button>\n          </form>\n        </div>\n        <div className=\"or\">\n          <Link to=\"/login\">I have an account</Link>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default class Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      err: 'Error occured!',\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  }\n\n  handleFormSubmit(e) {\n    e.preventDefault();\n\n    this.setState({ hasError: !this.state.hasError });\n  }\n\n  render() {\n    const { hasError, err } = this.state;\n\n    return (\n      <div className=\"main-content background-shade-darker\">\n        <div className=\"auth-page\">\n          {/*<h1 className={`heading`}>Log in</h1>*/}\n          <form style={{ textAlign: 'center' }}>\n            <p><input type=\"text\" placeholder=\"email\" className={`auth-input`} /></p>\n            <p><input type=\"password\" placeholder=\"password\" className={`auth-input`} /></p>\n            <p><input type=\"text\" className={`error-auth ${hasError ? 'visible' : ''}`} value={ err } readOnly /></p>\n            <button className={`submit-button`} onClick={this.handleFormSubmit}>Log in</button>\n            <div><Link to=\"/\">I have forgotten my password</Link></div>\n          </form>\n        </div>\n        <div className=\"or\">\n          <Link to=\"/signup\"> I don't have an account</Link>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class About extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeTabWho: false,\n      animatePicture: false,\n    };\n\n    this.onTabClick = this.onTabClick.bind(this);\n    this.onPictureClick = this.onPictureClick.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.location.hash === '#who') {\n      this.setState({ activeTabWho: true });\n      return;\n    }\n  }\n\n  onTabClick(e) {\n    let id = e.target.id;\n    // let anchor = '#' + id;\n\n    switch(id) {\n      case 'why':\n        this.setState({ activeTabWho: false});\n        // anchor = '';\n        break;\n      case 'who':\n        this.setState({ activeTabWho: true});\n        break;\n      default:\n        // Unknown id\n        return;\n    }\n\n    // If I push into history, the location.key changes, and that triggers the page to reload of course. Bug #3\n    // this.props.history.push(\"/about\" + anchor);\n\n    // Another way to make it work\n    // this.context.router.history.push(\"/about\" + anchor);\n  }\n\n  onPictureClick() {\n    this.setState( { animatePicture: true } );\n/*\n  How to make the current element z-index lowest?\n  So if we have 5 pictures:\n  Pic1: z-index: 5;\n  ...\n  Pic5: z-index: 1;\n\n  ->\n\n  Pic1: z-index: 1;\n  ...\n  Pic5: z-index: 2;\n  That way we move the highest picture to the very bottom, and scroll through them\n */\n    let that = this;\n    setTimeout(function() {\n      that.setState( { animatePicture: false } );\n    }, 1000);\n  }\n\n  render() {\n    const { activeTabWho, animatePicture } = this.state;\n\n    const whyContent = `It is my belief that you should be able to go online, connect to a person and have a great conversation.` +\n        `It doesn't even have to be great, but it can be meaningful, interesting and engaging, and I couldn't find ` +\n        `a platform like that myself. We don't choose the environments we grow up in, and we're sometimes stuck in a weird place in` +\n        `life, but that doesn't mean that you have to be alone. I'm strongly convinced that everyone deserves to be heard and to ` +\n        `have a way of communicating with others, without necessary knowing them in real life or even speaking to them ever again`;\n    const whoContent = `I'm a 27 year old self-taught programmer who lives and works in Malmö and who's deeply motivated to\n         contribute into wellness of everyone, and I'm confident that if we'll work in the same direction we can achieve excellence`;\n\n    return (\n      <div className={`main-content`}>\n        <h1 className={`heading`}>About</h1>\n        <div style={{ textAlign: 'center', fontSize: '20px' }}>\n          <span id={`why`} className={activeTabWho ? '' : 'active-tab'} onClick={this.onTabClick}>Why</span> |\n          <span id={`who`} className={activeTabWho ? 'active-tab' : ''} onClick={this.onTabClick}>Who</span>\n          <div className={activeTabWho ? 'inactive-content' : 'active-content'}>\n            {whyContent}\n          </div>\n          <div className={activeTabWho ? 'active-content' : 'inactive-content'}>\n            <div id=\"picture-gallery\">\n              <div className={`pic red ${animatePicture ? 'pic-discard' : ''}`} onClick={this.onPictureClick}></div>\n              <div className=\"pic blue\"></div>\n              <div className=\"pic green\"></div>\n            </div>\n            {whoContent}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport Nav from \"../nav\";\n\nconst svgCircleCheckmark = require('../images/circle_checkmark.svg');\n\nexport default class Contact extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      err: '',\n      sent: false,\n    };\n\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n  }\n\n  async handleFormSubmit(e) {\n    e.preventDefault();\n\n    let name = document.getElementById('name').value;\n    let email = document.getElementById('email').value;\n    let message = document.getElementById('message').value;\n\n    if (name == \"\") {\n      this.setState({ err: 'Please provide your name' });\n      return false;\n    }\n\n    if (email == \"\") {\n      this.setState({ err: 'Please provide your email' });\n      return false;\n    }\n\n    if (message == \"\") {\n      this.setState({ err: 'Please provide your message' });\n      return false;\n    }\n\n    let url = \"/api/contact\";\n    let json;\n\n    let params = {\n      name,\n      email,\n      message\n    };\n\n    try {\n      let response = await fetch(url, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(params)\n      });\n\n      json = await response.json();\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    if (json.error) {\n      this.setState({ err: json.msg });\n      return false;\n    }\n\n    this.setState({ err: '', sent: true });\n  }\n\n  render() {\n    const { err } = this.state;\n\n    return (\n      <div>\n        <Nav location={this.props.location} />\n        <div className=\"main-content\">\n          <div className=\"auth-page\">\n            <h1 className={`heading`}>Contact</h1>\n              <form className={`contact-form` + (this.state.sent ? '' : ' visible')}>\n                {/*Reason dropdown with nice rounded corners: https://www.w3schools.com/code/tryit.asp?filename=FYMRDTDV2KDM*/}\n                <input id=\"name\" type=\"text\" placeholder=\"name*\" className={`auth-input`} />\n                <input id=\"email\" type=\"text\" placeholder=\"email*\" className={`auth-input`} />\n                <textarea id=\"message\" placeholder=\"message*\" className={`auth-textarea`} rows=\"7\"></textarea>\n                <input type=\"text\" className={`error-auth ${err && 'visible'}`} value={ err } readOnly />\n                <button className={`submit-button`} onClick={this.handleFormSubmit}>Contact</button>\n              </form>\n            <div className={`contact-success`  + (this.state.sent ? ' visible' : '')}>\n              <img className=\"contact-success-checkmark\" src={svgCircleCheckmark} alt=\"Success\"></img>\n              <h1 className=\"contact-success-heading\">Thank you for your feedback</h1>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nconst messageTypeChatting = \"c\";\n\nexport default class History extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      chats: [],\n    };\n  }\n\n  async componentDidMount() {\n    let response = await this.identify();\n    if (!response) {\n      throw new Error(\"Couldn't identify user\");\n      return false;\n    }\n\n    response = await this.pullHistory();\n    if (!response) {\n      throw new Error(\"Couldn't pull user history\");\n      return false;\n    }\n\n    this.setState({chats: response.chats});\n  }\n\n  async pullHistory() {\n    let url = \"/api/history\";\n    let json;\n\n    try {\n      let response = await fetch(url, {credentials: \"include\"});\n      json = await response.json();\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    if (json.chats === undefined) {\n      throw new Error(\"Unknown pull result response\", json);\n      return false;\n    }\n\n    return json;\n  }\n\n  async identify() {\n    let url = \"/api/identify\" + window.location.search;\n    let json;\n\n    try {\n      let response = await fetch(url, {credentials: \"include\"});\n      json = await response.json();\n    } catch (err) {\n      console.log(err);\n      return false;\n    }\n\n    if (json.error === undefined || json.error) {\n      console.log(\"Unknown response:\", json);\n      return false;\n    }\n\n    return true;\n  }\n\n\n  render() {\n    return (\n        <div>\n          <h1 className=\"heading\">Recent chats</h1>\n          <ChatHistory chats={this.state.chats}/>\n        </div>\n    );\n  }\n}\n\nclass ChatHistory extends React.Component {\n  render() {\n    if (this.props.chats.length === 0) {\n      return (\n          <div className=\"no-history\">\n            You don't have any chats yet\n          </div>\n      );\n    }\n\n    return (\n        <div className=\"chats-rows\">\n          {this.props.chats.map(function (chat) {\n            return (\n                <div className=\"chat-row\">\n                  {chat.messages[0].timestamp} | {chat.duration} | {(!!chat.result.liked) ? \"Liked\" : \"Not liked\"} | {(!!chat.result.reported) ? chat.result.reported : \"Not reported\"}\n                </div>\n            );\n          })}\n        </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class NotFound extends React.Component {\n  render() {\n    return (\n      <h1 style={{ position: 'absolute', top: '70px', zIndex: '1'}}>Page not found</h1>\n    );\n  }\n}\n","import React from \"react\";\nimport {Route, Switch} from \"react-router-dom\";\n\nimport Home from \"./pages/home\";\nimport Signup from \"./pages/signup\";\nimport Login from \"./pages/login\";\nimport Chat from \"./pages/chat\";\nimport About from \"./pages/about\";\nimport Contact from \"./pages/contact\";\nimport History from \"./pages/history\";\nimport NotFound from \"./pages/notfound\";\n\nexport default class Routing extends React.Component {\n  render() {\n    return (\n      <Switch location={ this.props.location } >\n        <Route path=\"/\" exact render={() => <Home height={ this.props.height } width={ this.props.width } />}\n               location={ this.props.location } />\n        <Route path=\"/chat\" exact render={() => <Chat height={ this.props.height } width={ this.props.width }\n          location={ this.props.location } />} />\n        <Route path=\"/contact\" exact render={() => <Contact location={ this.props.location } />} />\n        {/*<Route path=\"/history\" exact render={() => <History />} />*/}\n        {/*<Route path=\"/about\" exact component={ About } location={ this.props.location } />*/}\n        {/*<Route path=\"/signup\" exact component={ Signup } />*/}\n        {/*<Route path=\"/login\" exact component={ Login} />*/}\n        <Route component={ NotFound } />\n      </Switch>\n    );\n  }\n}\n","import React from \"react\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { TransitionGroup, CSSTransition } from 'react-transition-group'\n\n// This helps know when the page is changed, since the whole thing is a single page application sort of with react\n// router\nimport WithRouterContainer from './WithRouterContainer';\n\n// Routing table\nimport Routing from './routing';\nimport Nav from './nav';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: window.location,\n      height: window.innerHeight,\n      width: window.innerWidth\n    };\n\n    this.onResize = this.onResize.bind(this);\n  }\n\n  componentDidMount() {\n    let vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n    window.addEventListener('resize', this.onResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n  }\n\n  onResize() {\n    let vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n    this.setState({ width: window.innerWidth, height: window.innerHeight});\n  }\n\n  handleRouteChange(newLocation) {\n    this.setState({ location: newLocation });\n  }\n\n  render() {\n    return (\n      <BrowserRouter>\n        <WithRouterContainer onRouteChange={newLocation => this.handleRouteChange(newLocation)}>\n          <TransitionGroup>\n            <CSSTransition\n                  key={this.state.location.pathname}\n                  classNames=\"fade\"\n                  in={false}\n                  appear={false}\n                  timeout={{ appear: 100, enter: 100, exit: 100}}\n            >\n              <Routing height={this.state.height} width={this.state.width} location={this.state.location} />\n            </CSSTransition>\n          </TransitionGroup>\n        </WithRouterContainer>\n      </BrowserRouter>\n    );\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}